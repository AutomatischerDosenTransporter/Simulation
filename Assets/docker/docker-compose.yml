version: '3.0'

services:


  ros-http-source:
    image: nginx:alpine
    container_name: ros-http-source
    volumes:
      - ./config/fileserver/default.conf:/etc/nginx/conf.d/default.conf
      - ./config/fileserver/shared:/usr/share/nginx/html
      - C:\\Users\\danie\\Nextcloud\\Huhan\\Unity\\ADT-Survival\\Assets\\adt_urdf:/usr/share/nginx/html/urdf
    ports:
      - 80:80
    networks:
      - ros

  # ros-listener:
  #   image: registry.nussi.net/ros:foxy-desktop
  #   container_name: ros-listener
  #   restart: unless-stopped
  #   command: ros2 run demo_nodes_cpp listener
  #   networks:
  #     - ros

  # ros-talker:
  #   image: registry.nussi.net/ros:foxy-desktop
  #   container_name: ros-talker
  #   restart: unless-stopped
  #   command: ros2 run demo_nodes_cpp talker
  #   networks:
  #     - ros

  ros-unity:
    image: registry.nussi.net/ros:unity
    container_name: ros-unity
    restart: unless-stopped
    command: >
      /bin/bash -c "cd /home/dev_ws
      && source install/setup.bash
      && colcon build
      && source install/setup.bash
      && ros2 run ros_tcp_endpoint default_server_endpoint --ros-args -p ROS_IP:=0.0.0.0"
    ports:
      - 10000:10000
    networks:
      - ros

  ros-foxglove-studio:
    image: ghcr.io/foxglove/studio:latest
    container_name: ros-foxglove-studio
    restart: unless-stopped
    ports:
      - 8080:8080
    networks:
      - ros
  

  ros-foxglove-bridge:
    image: registry.nussi.net/ros:foxglove-bridge
    container_name: ros-foxglove-bridge
    ports:
      - 8765:8765
    networks:
      - ros
  
  # ros-static-transform:
  #   image: registry.nussi.net/ros:foxy-desktop
  #   container_name: ros-static-transform
  #   command: ros2 run tf2_ros static_transform_publisher 0 0 0 0.0 0.0 0.0 odom basis_roboter_base_link
  #   networks:
  #     - ros

  # ros-basis-roboter-state:
  #   image: registry.nussi.net/ros:foxy-desktop
  #   container_name: ros-basis-roboter-state
  #   command: ros2 launch /config/basis_roboter/state.launch.xml
  #   networks:
  #     - ros
  #   volumes:
  #     - C:\\Users\\danie\\Nextcloud\\Huhan\\Unity\\ADT-Survival\\Assets\\adt_urdf:/urdf
  #     - ./config:/config
  
  # ros-basis-joint-state:
  #   image: registry.nussi.net/ros:joint-state
  #   container_name: ros-basis-joint-state
  #   command: ros2 launch /config/basis_roboter/joint.launch.xml
  #   networks:
  #     - ros
  #   volumes:
  #     - C:\\Users\\danie\\Nextcloud\\Huhan\\Unity\\ADT-Survival\\Assets\\adt_urdf:/urdf
  #     - ./config:/config
  
  ros-service-roboter-state:
    image: registry.nussi.net/ros:robot-state
    container_name: ros-service-roboter-state
    command: ros2 launch /config/service_roboter/state.launch.xml
    networks:
      - ros
    volumes:
      - C:\\Users\\danie\\Nextcloud\\Huhan\\Unity\\ADT-Survival\\Assets\\adt_urdf:/urdf
      - ./config:/config
  
  ros-service-joint-state:
    image: registry.nussi.net/ros:joint-state
    container_name: ros-service-joint-state
    command: ros2 launch /config/service_roboter/joint.launch.xml
    networks:
      - ros
    volumes:
      - C:\\Users\\danie\\Nextcloud\\Huhan\\Unity\\ADT-Survival\\Assets\\adt_urdf:/urdf
      - ./config:/config

  ros-service-twist-mux:
    image: registry.nussi.net/ros:twist-mux
    container_name: ros-service-twist-mux
    command: ros2 launch /config/service_roboter/twist_mux.launch.xml
    networks:
      - ros
    volumes:
      - ./config:/config

  ros-service-controller-manager:
    image: registry.nussi.net/ros:control
    container_name: ros-service-controller-manager
    command: ros2 launch /config/service_roboter/controller_manager.launch.py
    networks:
      - ros
    volumes:
      - C:\\Users\\danie\\Nextcloud\\Huhan\\Unity\\ADT-Survival\\Assets\\adt_urdf:/urdf
      - ./config:/config


  # ros-service-slam:
  #   image: registry.nussi.net/ros:slam
  #   container_name: ros-service-slam
  #   command: ros2 launch  slam_toolbox online_async_launch.py params_file:=/config/service_roboter/slam.yaml
  #   networks:
  #     - ros
  #   volumes:
  #     - ./config:/config
  
  # ros-service-localization:
  #   image: registry.nussi.net/ros:localization
  #   container_name: ros-service-localization
  #   command: ros2 launch /config/service_roboter/localization.launch.xml
  #   networks:
  #     - ros
  #   volumes:
  #     - ./config:/config


networks:
  ros: